(this["webpackJsonp@lundiak/react-snake"]=this["webpackJsonp@lundiak/react-snake"]||[]).push([[0],{17:function(e,t,n){},18:function(e,t,n){},20:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),c=n(12),o=n.n(c),i=(n(17),n(11)),s=n(4),u=n(1),l=n(6),b=(n(18),n(0));function j(e){var t=e.className,n=void 0===t?"":t,a=e.gameTrigger,r=e.boardState,c=e.x,o=e.y,i=function(){var e=Object(s.a)(r.snake),t=e[0],n=e.slice(1),a=c===t[0]&&o===t[1],i=n.some((function(e){return c===e[0]&&o===e[1]}));return a?"snake head":i?"snake tail":""},u="".concat(c===r.targetPoint[0]&&o===r.targetPoint[1]?"target":""," ").concat(i()," ").concat(n);return Object(b.jsx)("div",{className:"point ".concat(u),onClick:function(){return i()?null:a([c,o])},children:O(c,o)})}function O(e,t){var n="";return 0===e&&0===t?n=0:0===e&&t>0?n="y"+t:0===t&&e>0&&(n="x"+e),n}n(20);var f,d=1e3,g={boardSize:[8,8],targetPoint:[2,5],snake:[[4,5]],started:!1,interrupt:!1,conflict:!1};function T(e){for(var t=e.children,n=Object(a.useReducer)(E,g),r=Object(l.a)(n,2),c=r[0],o=r[1],i=c.boardSize[0],s=c.boardSize[1],u=function(e){c.started?(clearInterval(f),o({type:"INTERRUPT"})):o({type:"START"}),function(e,t,n){var a=e.snake[0],r=Object(l.a)(a,2),c=r[0],o=r[1],i=Object(l.a)(t,2),s=i[0],u=i[1];if(u===o)if(s<c){var b=c-1;f=setInterval((function(){v(n,e,[b,u]),--b}),d)}else{f&&clearInterval(f);var j=c+1;f=setInterval((function(){v(n,e,[j,u]),++j}),d)}if(s===c)if(u<o){var O=o-1;f=setInterval((function(){v(n,e,[s,O]),--O}),d)}else{f&&clearInterval(f);var g=o+1;f=setInterval((function(){v(n,e,[s,g]),++g}),d)}}(c,e,o)},O=[],T=0;T<i;T++)for(var p=0;p<s;p++)O.push(Object(b.jsx)(j,{gameTrigger:u,boardState:c,x:T,y:p},"cell-x[".concat(T,"]-y[").concat(p,"]")));return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"wrapper",children:O}),t]})}function E(e,t){switch(t.type){case"START":return console.log("Game STARTED"),Object(u.a)(Object(u.a)({},e),{},{started:!0});case"FINISH":return console.log("Game Over!"),Object(u.a)(Object(u.a)({},e),{},{started:!1});case"SNAKE_MOVE":console.log("Snake is MOVING");var n=Object(s.a)(e.snake),a=n[0],r=n.slice(1);return r.length>0&&(r.pop(),r.unshift(a)),Object(u.a)(Object(u.a)({},e),{},{snake:[t.newPosition].concat(Object(i.a)(r)),interrupt:!1});case"GROW_SNAKE":console.log("Snake is GROWING");var c=Object(s.a)(e.snake),o=c[0],l=c.slice(1);return l.unshift(t.newPosition),Object(u.a)(Object(u.a)({},e),{},{snake:[o].concat(Object(i.a)(l)),interrupt:!1});case"CONFLICT_WITH_TARGET":return console.log("Target point reached. Generating new one."),Object(u.a)({},e);case"CONFLICT_WITH_ITSELF":return console.log("Don't eat yourself"),Object(u.a)(Object(u.a)({},e),{},{conflict:"itself"});case"CONFLICT_WITH_EDGES":return console.log("Bang..."),Object(u.a)(Object(u.a)({},e),{},{started:!1,targetPoint:t.newPosition,snake:[t.newSnakeHead]});case"REGENERATE_TARGET":return console.log("Target point regeneration."),Object(u.a)(Object(u.a)({},e),{},{targetPoint:t.newPosition});case"REGENERATE_SNAKE":return console.log("Snake head point regeneration."),Object(u.a)(Object(u.a)({},e),{},{snake:[t.newPosition]});case"INTERRUPT":return console.log("INTERRUPT"),Object(u.a)(Object(u.a)({},e),{},{interrupt:!0});default:return e}}function v(e,t,n){(function(e){var t=Object(l.a)(e,2),n=t[0],a=t[1];if(n<0)return!0;if(n>g.boardSize[0]-1)return!0;if(a<0)return!0;if(a>g.boardSize[1]-1)return!0;return!1})(n)&&p(e),e({type:"SNAKE_MOVE",newPosition:n}),S(t,n)&&(e({type:"GROW_SNAKE",newPosition:n}),e({type:"REGENERATE_TARGET",newPosition:I("target")}));var a=Object(s.a)(t.snake).slice(1);a.length>0&&N(a,n)&&(e({type:"CONFLICT_WITH_ITSELF"}),p(e))}function p(e){clearInterval(f),e({type:"FINISH"}),setTimeout((function(){e({type:"REGENERATE_TARGET",newPosition:I("target")}),e({type:"REGENERATE_SNAKE",newPosition:I("snakeHead")})}),3e3)}function I(e){var t=Math.floor(Math.random()*g.boardSize[0]),n=Math.floor(Math.random()*g.boardSize[1]);return console.log(e+" new random point",[t,n]),[t,n]}var S=function(e,t){return t[0]===e.targetPoint[0]&&t[1]===e.targetPoint[1]},N=function(e,t){return e.some((function(e){return e[0]===t[0]&&e[1]===t[1]}))};function R(){return Object(b.jsx)(T,{})}n(21);var h=function(){return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)("header",{className:""}),Object(b.jsx)("main",{children:Object(b.jsx)(R,{})})]})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,23)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))};o.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(h,{})}),document.getElementById("root")),k()}},[[22,1,2]]]);
//# sourceMappingURL=main.3723d0fd.chunk.js.map