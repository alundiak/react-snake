(this["webpackJsonp@lundiak/react-snake"]=this["webpackJsonp@lundiak/react-snake"]||[]).push([[0],{17:function(e,t,n){},19:function(e,t,n){},20:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),o=n(11),c=n.n(o),i=(n(17),n(12)),s=n(7),l=n(1),u=n(5),b=n(0);function d(e){var t=e.gameTrigger,n=e.boardState,a=e.x,r=e.y,o=function(){var e=Object(s.a)(n.snake),t=e[0],o=e.slice(1),c=a===t[0]&&r===t[1],i=o.some((function(e){return a===e[0]&&r===e[1]}));return c?"snake head":i?"snake tail":""},c="".concat(a===n.targetPoint[0]&&r===n.targetPoint[1]?"target":""," ").concat(o());return Object(b.jsx)("div",{className:"point ".concat(c),onClick:function(){return o()?null:t([a,r])},children:j(a,r)})}function j(e,t){var n="";return 0===e&&0===t?n=0:0===e&&t>0?n="y"+t:0===t&&e>0&&(n="x"+e),n}n(19);var E=1e3,O={boardSize:[8,8],targetPoint:[2,3],snake:[[4,5]],started:!1};function T(e){for(var t=e.children,n=Object(a.useReducer)(g,O),r=Object(u.a)(n,2),o=r[0],c=r[1],i=o.boardSize[0],s=o.boardSize[1],l=function(e){o.started?c({type:"INTERRUPT"}):c({type:"START"}),function(e,t,n){var a,r=e.snake[0],o=Object(u.a)(r,2),c=o[0],i=o[1],s=Object(u.a)(t,2),l=s[0],b=s[1];if(b===i)if(l<c){var d=c-1;a=setInterval((function(){var e=[d,b];if(v(e))return clearInterval(a),n({type:"FINISH"}),n({type:"REGENERATE_TARGET",newPosition:f("target")}),void n({type:"REGENERATE_SNAKE",newPosition:f("snakeHead")});n({type:"SNAKE_MOVE",newPosition:e}),--d}),E)}else{a&&clearInterval(a);var j=c+1;a=setInterval((function(){var e=[j,b];if(v(e))return clearInterval(a),n({type:"FINISH"}),n({type:"REGENERATE_TARGET",newPosition:f("target")}),void n({type:"REGENERATE_SNAKE",newPosition:f("snakeHead")});n({type:"SNAKE_MOVE",newPosition:e}),++j}),E)}}(o,e,c)},j=[],T=0;T<i;T++)for(var S=0;S<s;S++)j.push(Object(b.jsx)(d,{gameTrigger:l,boardState:o,x:T,y:S},"cell-x[".concat(T,"]-y[").concat(S,"]")));return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"wrapper",children:j}),t]})}function g(e,t){switch(t.type){case"START":return console.log("Game STARTED"),Object(l.a)(Object(l.a)({},e),{},{started:!0});case"FINISH":return console.log("Game Over!"),Object(l.a)(Object(l.a)({},e),{},{started:!1});case"SNAKE_MOVE":console.log("Snake is MOVING");var n=Object(s.a)(e.snake).slice(1);return Object(l.a)(Object(l.a)({},e),{},{snake:[t.newPosition].concat(Object(i.a)(n))});case"CONFLICT_WITH_TARGET":return console.log("Target point reached. Generating new one."),Object(l.a)({},e);case"CONFLICT_WITH_ITSELF":return console.log("Don't eat yourself"),Object(l.a)({},e);case"CONFLICT_WITH_EDGES":return console.log("Bang..."),Object(l.a)(Object(l.a)({},e),{},{started:!1,targetPoint:t.newPosition,snake:[t.newSnakeHead]});case"REGENERATE_TARGET":return console.log("Target point regeneration."),Object(l.a)(Object(l.a)({},e),{},{targetPoint:t.newPosition});case"REGENERATE_SNAKE":return console.log("Snake head point regeneration."),Object(l.a)(Object(l.a)({},e),{},{snake:[t.newPosition]});case"INTERRUPT":return console.log("INTERRUPT."),Object(l.a)({},e);default:return e}}function f(e){var t=Math.floor(Math.random()*O.boardSize[0]),n=Math.floor(Math.random()*O.boardSize[1]);return console.log(e+" new random point",[t,n]),[t,n]}function v(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return n<0||(n>O.boardSize[0]-1||(a<0||a>O.boardSize[1]-1))}function S(){return Object(b.jsx)(T,{})}n(20);var p=function(){return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)("header",{className:""}),Object(b.jsx)("main",{children:Object(b.jsx)(S,{})})]})},N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,22)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),o(e),c(e)}))};c.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(p,{})}),document.getElementById("root")),N()}},[[21,1,2]]]);
//# sourceMappingURL=main.d01f525e.chunk.js.map