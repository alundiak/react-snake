(this["webpackJsonp@lundiak/react-snake"]=this["webpackJsonp@lundiak/react-snake"]||[]).push([[0],{17:function(e,t,n){},19:function(e,t,n){},20:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),o=n(12),c=n.n(o),i=(n(17),n(11)),s=n(5),u=n(1),l=n(6),b=n(0);function j(e){var t=e.className,n=void 0===t?"":t,a=e.gameTrigger,r=e.boardState,o=e.x,c=e.y,i=function(){var e=Object(s.a)(r.snake),t=e[0],n=e.slice(1),a=o===t[0]&&c===t[1],i=n.some((function(e){return o===e[0]&&c===e[1]}));return a?"snake head":i?"snake tail":""},u="".concat(o===r.targetPoint[0]&&c===r.targetPoint[1]?"target":""," ").concat(i()," ").concat(n);return Object(b.jsx)("div",{className:"point ".concat(u),onClick:function(){return i()?null:a([o,c])},children:O(o,c)})}function O(e,t){var n="";return 0===e&&0===t?n=0:0===e&&t>0?n="y"+t:0===t&&e>0&&(n="x"+e),n}n(19);var d,g=1e3,E={boardSize:[8,8],targetPoint:[2,5],snake:[[4,5]],started:!1,interrupt:!1};function T(e){for(var t=e.children,n=Object(a.useReducer)(f,E),r=Object(l.a)(n,2),o=r[0],c=r[1],i=o.boardSize[0],s=o.boardSize[1],u=function(e){o.started?(clearInterval(d),c({type:"INTERRUPT"})):c({type:"START"}),function(e,t,n){var a=e.snake[0],r=Object(l.a)(a,2),o=r[0],c=r[1],i=Object(l.a)(t,2),s=i[0],u=i[1];if(u===c)if(s<o){var b=o-1;d=setInterval((function(){p(n,e,[b,u]),--b}),g)}else{d&&clearInterval(d);var j=o+1;d=setInterval((function(){p(n,e,[j,u]),++j}),g)}}(o,e,c)},O=[],T=0;T<i;T++)for(var S=0;S<s;S++)O.push(Object(b.jsx)(j,{gameTrigger:u,boardState:o,x:T,y:S},"cell-x[".concat(T,"]-y[").concat(S,"]")));return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"wrapper",children:O}),t]})}function f(e,t){switch(t.type){case"START":return console.log("Game STARTED"),Object(u.a)(Object(u.a)({},e),{},{started:!0});case"FINISH":return console.log("Game Over!"),Object(u.a)(Object(u.a)({},e),{},{started:!1});case"SNAKE_MOVE":console.log("Snake is MOVING");var n=Object(s.a)(e.snake).slice(1);return Object(u.a)(Object(u.a)({},e),{},{snake:[t.newPosition].concat(Object(i.a)(n)),interrupt:!1});case"GROW_SNAKE":console.log("Snake is GROWING");var a=Object(s.a)(e.snake),r=a[0],o=a.slice(1);return console.log(o),o.push(t.newPosition),console.log(o),Object(u.a)(Object(u.a)({},e),{},{snake:[r].concat(Object(i.a)(o)),interrupt:!1});case"CONFLICT_WITH_TARGET":return console.log("Target point reached. Generating new one."),Object(u.a)({},e);case"CONFLICT_WITH_ITSELF":return console.log("Don't eat yourself"),Object(u.a)({},e);case"CONFLICT_WITH_EDGES":return console.log("Bang..."),Object(u.a)(Object(u.a)({},e),{},{started:!1,targetPoint:t.newPosition,snake:[t.newSnakeHead]});case"REGENERATE_TARGET":return console.log("Target point regeneration."),Object(u.a)(Object(u.a)({},e),{},{targetPoint:t.newPosition});case"REGENERATE_SNAKE":return console.log("Snake head point regeneration."),Object(u.a)(Object(u.a)({},e),{},{snake:[t.newPosition]});case"INTERRUPT":return console.log("INTERRUPT"),Object(u.a)(Object(u.a)({},e),{},{interrupt:!0});default:return e}}function p(e,t,n){if(function(e){var t=Object(l.a)(e,2),n=t[0],a=t[1];if(n<0)return!0;if(n>E.boardSize[0]-1)return!0;if(a<0)return!0;if(a>E.boardSize[1]-1)return!0;return!1}(n))return clearInterval(d),e({type:"FINISH"}),e({type:"REGENERATE_TARGET",newPosition:S("target")}),void e({type:"REGENERATE_SNAKE",newPosition:S("snakeHead")});e({type:"SNAKE_MOVE",newPosition:n}),n[0]===t.targetPoint[0]&&n[1]===t.targetPoint[1]&&(e({type:"GROW_SNAKE",newPosition:n}),e({type:"REGENERATE_TARGET",newPosition:S("target")}))}function S(e){var t=Math.floor(Math.random()*E.boardSize[0]),n=Math.floor(Math.random()*E.boardSize[1]);return console.log(e+" new random point",[t,n]),[t,n]}function v(){return Object(b.jsx)(T,{})}n(20);var R=function(){return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)("header",{className:""}),Object(b.jsx)("main",{children:Object(b.jsx)(v,{})})]})},N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,22)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),o(e),c(e)}))};c.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(R,{})}),document.getElementById("root")),N()}},[[21,1,2]]]);
//# sourceMappingURL=main.519a0119.chunk.js.map